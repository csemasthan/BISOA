<%- include('partials/header', { pageTitle: 'My Profile', activities }) %>

<main class="container py-5 flex-grow-1" style="max-width:600px">
  <h2 class="mb-4">My Profile</h2>

  <% if (error)   { %><div class="alert alert-danger"><%= error %></div><% } %>
  <% if (success) { %><div class="alert alert-success"><%= success %></div><% } %>

  <form method="POST" action="/profile" enctype="multipart/form-data">
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input name="name" class="form-control" value="<%= user.name %>" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Email</label>
      <input name="email" type="email" class="form-control" value="<%= user.email %>" required>
    </div>

    <div class="mb-3">
      <label class="form-label">Profile Photo</label><br>
      <% if (user.photo) { %>
        <img src="<%= user.photo %>" alt="avatar" class="rounded-circle mb-2" width="80" height="80">
      <% } else { %>
        <div class="text-muted mb-2">No photo uploaded</div>
      <% } %>
      <input type="file" name="photo" accept=".jpg,.jpeg,.png" class="form-control">
    </div>

    <button class="btn btn-primary">Save Changes</button>
  </form>
</main>

<%- include('partials/footer') %>
